# Claude AI Integration Setup for Desa Wire

## Overview
Desa Wire now includes professional Claude AI integration for intelligent, research-backed responses. This guide will help you set up Claude API access for the best chat experience.

## Prerequisites
- Claude API account and API key
- Node.js environment with Desa Wire installed

## Setup Instructions

### 1. Get Claude API Access
1. Visit [Anthropic's Claude API page](https://console.anthropic.com/)
2. Sign up for an account or log in
3. Navigate to API Keys section
4. Create a new API key
5. Copy the API key for configuration

### 2. Configure Environment Variables
Create a `.env` file in your Desa Wire root directory:

```bash
# Claude AI Configuration
ANTHROPIC_API_KEY=your_claude_api_key_here
CLAUDE_MODEL=claude-3-5-sonnet-20241022
CLAUDE_MAX_TOKENS=2000

# Server Configuration
PORT=3002
SESSION_SECRET=desa-wire-secret-key-2024
```

### 3. Install Dependencies
The Claude SDK is already installed. If you need to reinstall:

```bash
npm install @anthropic-ai/sdk
```

### 4. Start the Server
```bash
npm start
```

## Features

### Professional AI Responses
- **Research-backed answers** with detailed explanations
- **Context-aware conversations** that remember previous messages
- **Construction expertise** specifically trained for project management
- **Professional formatting** with structured responses

### Response Types
- **How-to guides** with step-by-step instructions
- **Definitions** with comprehensive explanations
- **Best practices** and industry standards
- **Troubleshooting** with systematic problem-solving
- **Recommendations** tailored to your needs

### File Attachment Support
- **Document analysis** for PDFs, Word docs, and spreadsheets
- **Image interpretation** for construction photos and drawings
- **Data analysis** for project spreadsheets and reports
- **Context integration** with attached files

### Fallback System
- **Automatic fallback** to local AI if Claude API is unavailable
- **Seamless experience** with no interruption to chat functionality
- **Error handling** with graceful degradation

## Usage Examples

### Basic Questions
```
User: "How do I create a project timeline?"
Claude: [Provides detailed step-by-step guide with best practices]
```

### File Attachments
```
User: [Uploads construction drawing]
Claude: [Analyzes image and provides specific guidance based on visual content]
```

### Follow-up Conversations
```
User: "What about resource allocation?"
Claude: [References previous conversation and provides contextual advice]
```

## Configuration Options

### Claude Models
- `claude-3-5-sonnet-20241022` (Recommended) - Best balance of speed and quality
- `claude-3-opus-20240229` - Most capable, slower response
- `claude-3-haiku-20240307` - Fastest, good for simple queries

### Token Limits
- `CLAUDE_MAX_TOKENS=2000` (Default) - Good for detailed responses
- Increase for longer responses
- Decrease for faster responses

### Temperature Settings
- Current: 0.7 (balanced creativity and consistency)
- Adjust in `config/claude.js` if needed

## Troubleshooting

### Common Issues

**1. API Key Not Working**
- Verify API key is correct
- Check account has sufficient credits
- Ensure API key has proper permissions

**2. Slow Responses**
- Check internet connection
- Verify Claude API status
- Consider using a different model

**3. Fallback Responses**
- Check API key configuration
- Verify network connectivity
- Review server logs for errors

### Error Messages
- `Claude API Error: [details]` - API-related issues
- `Using fallback response` - Claude unavailable, using local AI
- `Response generated by Claude AI` - Successfully using Claude

## Security Notes

### API Key Protection
- Never commit API keys to version control
- Use environment variables for configuration
- Rotate API keys regularly
- Monitor API usage and costs

### Data Privacy
- Claude API may process your messages
- Review Anthropic's privacy policy
- Consider data sensitivity when sharing files
- Use fallback mode for sensitive information

## Cost Management

### API Usage
- Monitor usage in Anthropic console
- Set usage limits if available
- Optimize prompts for efficiency
- Use fallback for non-critical queries

### Optimization Tips
- Keep conversation context manageable
- Use specific, focused questions
- Avoid unnecessary file attachments
- Regular cleanup of conversation history

## Support

### Getting Help
1. Check this documentation
2. Review server logs for errors
3. Test with simple questions first
4. Verify API key and configuration

### Contact Information
- Desa Wire Support: [Your support contact]
- Claude API Support: [Anthropic support]
- Technical Issues: [Your technical contact]

## Updates and Maintenance

### Regular Updates
- Keep Claude SDK updated
- Monitor for new model releases
- Update system prompts as needed
- Review and optimize responses

### Performance Monitoring
- Track response times
- Monitor API usage and costs
- Analyze user satisfaction
- Optimize based on usage patterns

---

**Note**: This integration provides professional, research-backed AI responses while maintaining fallback functionality for reliability. The system is designed to enhance your Desa Wire experience with intelligent, contextual assistance.
